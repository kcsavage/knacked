
<head>
	<title>KNACKED</title>
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
</head>

<body>
	{{> page}}
</body>

<template name="page">
	{{#if showCreateDialog}}
	{{> createDialog}}
	{{/if}}

	{{#if showInviteDialog}}
	{{> inviteDialog}}
	{{/if}}

	{{#if showUserProfile}}
	{{> user_profile}}
	{{/if}}
	
	<div class="container-fluid">
		<div class="row-fluid topBar">
			<div class="span8">
				KNACKED LOGO GOES HERE
				<input type="text" class="search" />
			</div>
			<div class = "span2 login pull-right">
				{{loginButtons align="left"}}
			</div>
		</div>
		<div class="row-fluid">
			<div class="span1">
				<div class="sidebar-nav-fixed sideBar">
					<a href = "#" class="add">
						<img src = "addknack.png" class="linkButtonImg">
					</a>
					<!-- <input type="button" class="add" value="BIG+" /><br><br> -->
					<a href = "#" class="Profile ">
						<img src = "profile.png" class="linkButtonImg">
					</a>
					<!-- <input type="button" class="showUser" value="Profile" /> <br><br> -->
					<a href = "#" class="Contacts">
						<img src = "contacts.png" class="linkButtonImg">
					</a>
					<!-- <input type="button" class="showUser" value="Peoples" /> -->
				</div>
			</div>
			<div class="span6 span-fixed-sidebar" >
				{{#each myEvent}}
				{{> myEvents}}
				{{/each}}
			</div>
			<div class="span4 pull-right">
				{{> details}}
			</div>
		</div>
	</div>
	<svg height="0" xmlns="http://www.w3.org/2000/svg" >
		<filter id="drop-shadow">
			<feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
			<feOffset dx="2" dy="2" result="offsetblur"/>
			<feFlood flood-color="rgba(0,0,0,0.75)"/>
			<feComposite in2="offsetblur" operator="in"/>
			<feMerge>
				<feMergeNode/>
				<feMergeNode in="SourceGraphic"/>
			</feMerge>
		</filter>
	</svg>
</template>

<template name="myEvents">
	<div class="row-fluid teaser">
		<div>
			<img src = "profile.png" class="teaserImg"> 
			<h4><a href="#" id= "x" class="getDescription">{{myTitle}}</a></h4>
			<div class="inlineDiv">by: User's Name {{creatorName}}</div>
		</div>
		<div class="desc">
			{{description}}
		</div>
		<div class="locDateTime">
			<div class="loc">{{location}}</div>
			<div class="dateTime">{{date}} {{time}}</div>
		</div>

		
	</div>
	
</template>

<template name="createDialog">
	<div class="mask"> </div>
	<div class="modal">
		<div class="modal-header">
			<button type="button" class="close cancel">&times;</button>
			<h3>Add Knacktivity</h3>
		</div>

		<div class="modal-body">
			{{#if error}}
			<div class="alert alert-error">{{error}}</div>
			{{/if}}

			<label>Title</label>
			<input type="text" class="title div5">

			<label>Description</label>
			<textarea class="description div5"></textarea>

			<label>Date</label>
			<input type="text" id="datePicker" class="datePicker" />

			<label>Time</label>
			<input type="text" class="time" />

			<label>Location</label>
			<input type="text" class="location div5" />

			<label>Knacks</label>
			<!-- <input type="text" class="knacks div5" /> -->
			<ul id="knack-list">
				<li>
					{{#if adding_tag_knack}}
					<div class="knack edittag-knack">
						<input type="text" id="edittag-input-knack" value="" />
					</div>
					{{else}}
					<div class="knack addtag-knack">
						+knack
					</div>
					{{/if}}
				</li>
				{{#each tagKnacks}}
				{{>knack_item}}
				{{/each}}
			</ul>
			<br>
			<br>
			<label class="checkbox">
				<input type="checkbox" class="private">
				Private event &mdash; invitees only
			</label>
		</div>

		<div class="modal-footer">
			<a href="#" class="btn cancel">Cancel</a>
			<a href="#" class="btn btn-primary save">Add Knacktivity</a>
		</div>
	</div>
</template>

<template name="details">
	<div class="details">
		{{#if knacktivity}}
		{{#with knacktivity}}
		<h1>{{title}}</h1>
		<h2>{{date}} @ {{time}} </h2>
		<div class="location"><h3>{{location}}<h3></div>
		<div class="description">{{description}}</div>
		
		<ul id="knack-list">
			{{#each knacktivityTags}}
			{{> knack_item}}
			{{/each}}
		</ul>
		<br>


		{{> attendance}}

		<div class="rsvp-buttons">
			{{#if currentUser}}
			<input type="button" value="I'm going!"
			class="btn btn-small rsvp_yes {{maybeChosen "yes"}}">
			<input type="button" value="Maybe"
			class="btn btn-small rsvp_maybe {{maybeChosen "maybe"}}">
			<input type="button" value="No"
			class="btn btn-small rsvp_no {{maybeChosen "no"}}">
			{{else}}
			<i>Sign in to RSVP for this knacktivity.</i>
			{{/if}}
			<p><small>Posted by {{{creatorName}}}</small></p>
		</div>

		{{#if canRemove}}
		<div class="alert alert-info"><small>
			You posted this knacktivity and nobody is signed up to go, so if
			you like, you could
			<b><a href="#" class="removeListing">delete this listing</a></b>.
		</small>
	</div>
	{{/if}}
	{{/with}}
	{{else}}
	{{#if user}}
	{{> user_profile_view}}
	{{else}}
	<h1 class="muted pagination-centered">
		{{#if anyKnacktivity}}
		Click a knacktivity to select it
		{{else}}
		Sign in and click add knacktivity to make a new knacked event
		{{/if}}
	</h1>
	{{/if}}
	{{/if}}


</div>
</template>

<template name="attendance">
	<div class="attendance well well-small">
		<div class="muted who"><b>Who</b></div>
		{{#if public}}
		<div>
			<b>Everyone</b>
			<span class="label label-inverse pull-right">Invited</span>
		</div>
		{{/if}}

		{{#each rsvps}}
		<div>
			{{{rsvpName}}
			{{#if rsvpIs "yes"}}
			<span class="label label-success pull-right">Going</span>
			{{/if}}
			{{#if rsvpIs "maybe"}}
			<span class="label label-info pull-right">Maybe</span>
			{{/if}}
			{{#if rsvpIs "no"}}
			<span class="label label pull-right">No</span>
			{{/if}}
		</div>
		{{/each}}

		{{#unless public}}
		{{#each outstandingInvitations}}
		<div>
			{{invitationName}}
			<span class="label label-inverse pull-right">Invited</span>
		</div>
		{{/each}}
		{{/unless}}

		{{#if nobody}}
		<div>Nobody.</div>
		{{/if}}

		
		<div class="invite">
			<a href="#" class="btn btn-mini invite">Invite people</a>
		</div>

	</div>
</template>

<template name="inviteDialog">
	<div class="mask"> </div>
	<div class="modal">
		<div class="modal-header">
			<button type="button" class="close done">&times;</button>
			<h3>Invite people</h3>
		</div>

		<div class="modal-body">
			{{#each uninvited}}
			<div class="invite-row">
				<a href="#" class="btn invite">Invite</a>
				{{{displayName}}}
			</div>
			{{else}}
			Everyone on the site has already been invited.
			{{/each}}
		</div>

		<div class="modal-footer">
			<a href="#" class="btn btn-primary done">Done</a>
		</div>
	</div>
</template>

<template name ="user_profile">
	<div class="mask"> </div>
	<div class="modal">
		<div class="modal-header">
			<button type="button" class="close cancel">&times;</button>
			<h3>User Profile</h3>
		</div>
		<div class="modal-body">
			<div class="email">{{email}}</div>
			<div class="row-fluid">
				shares
				<ul id="knack-list">
					<li>
						{{#if adding_tag_share}}
						<div class="knack edittag-share">
							<input type="text" id="edittag-input-share" value="" />
						</div>
						{{else}}
						<div class="knack addtag-share">
							+knack
						</div>
						{{/if}}
					</li>
					{{#each tagShares}}
					{{>knack_item}}
					{{/each}}
				</ul>
			</div>
			<div class="row-fluid">
				wants

				<ul id="knack-list">
					<li>
						{{#if adding_tag_want}}
						<div class="knack edittag-want">
							<input type="text" id="edittag-input-want" value="" />
						</div>
						{{else}}
						<div class="knack addtag-want">
							+knack
						</div>
						{{/if}}
					</li>
					{{#each tagWants}}
					{{>knack_item}}
					{{/each}}
				</ul>
			</div>
		</div>
		<div class="modal-footer">
			<a href="#" class="btn cancel">Cancel</a>
			<a href="#" class="btn btn-primary save">Save</a>
		</div>
	</div>
</template>

<template name="user_profile_view">
	
	name: {{{myname}}} <br>
	shares: {{shares}}<br>
	wants: {{wants}}<br>
	followers: {{#each followers}}
	{{> user_list}}
	{{/each}}<br>
	following:  {{#each following}}
	{{> user_array}}
	{{/each}}<br>

	{{#if currentlyFollowing}}
	<a href="#" class="unFollowMe">Stop following me!!!!</a> <br>	
	{{else}}
	<a href="#" class="followMe">Follow me!!!!</a> <br>
	{{/if}}
</template>

<template name ="user_list">
	<li>
		{{{user}}}
	</li>
</template>

<template name ="user_array">
	<li>
		{{{user}}}
	</li>
</template>

<template name="knack_item">
	<li class="">
		<div class="knack removable_knack">
			<div class="name">{{knacks}}</div>
			<div class="remove">-</div>
		</div>
	</li>
</template>

